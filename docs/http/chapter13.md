---
title: 第十三章：摘要认证
date: 2021-02-02
---

[[TOC]]

## 13.1 摘要认证的改进

摘要认证是另一种 HTTP 认证协议，它试图修复基本认证协议的严重缺陷。具体来说，摘要认证进行了如下改进。

- 永远不会以明文方式在网络上发送密码。
- 可以防止恶意用户捕获并重放认证的握手过程。 
- 可以有选择地防止对报文内容的篡改。
- 防范其他几种常见的攻击方式。

摘要认证并不是最安全的协议。
摘要认证并不能满足安全 HTTP 事务的很多需求。
对这些需求来说，使用传输层安全(Transport Layer Security，TLS)和安全 HTTP(Secure HTTP，HTTPS)协议更为合适一些。

### 13.1.1 用摘要保护密码

摘要认证遵循的箴言是“绝不通过网络发送密码”。
客户端不会发送密码，而是会发 送一个“指纹”或密码的“摘要”，这是密码的不可逆扰码。

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3602b2b229864c9286f26737a7dd7fd4~tplv-k3u1fbpfcp-watermark.image)

- 在图 13-1a 中，客户端请求了某个受保护文档。
- 在图 13-1b 中，在客户端能够证明其知道密码从而确认其身份之前，服务器拒绝提供文档。服务器向客户端发起质询，询问用户名和摘要形式的密码。
- 在图 13-1c 中，客户端传递了密码的摘要，证明它是知道密码的。服务器知道所 有用户的密码，因此可以将客户提供的摘要与服务器自己计算得到的摘要进行 比较，以验证用户是否知道密码。另一方在不知道密码的情况下，很难伪造出正确的摘要。
- 在图13-1d中，服务器将客户端提供的摘要与服务器内部计算出的摘要进行对比。如果匹配，就说明客户端知道密码(或者很幸运地猜中了!)。可以设置摘要函数，使其产生很多数字，让人不可能幸运地猜中摘要。服务器进行了匹配验证之 后，会将文档提供给客户端——整个过程都没有在网络上发送密码。

### 13.1.2 单向摘要

